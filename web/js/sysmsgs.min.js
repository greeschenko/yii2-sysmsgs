"use strict";var removeActive=function(){$(".sysmsgs").each(function(a){$(this).removeClass("active")})};$(".sysmsgs").each(function(a){var s=$(this);$(s.data("res")).addClass("sysmsgsres"),s.addClass(s.data("group")),$.ajax({url:"/sysmsgs/my/get-count",type:"GET",dataType:"json",data:"group="+s.data("group"),success:function(a,t,e){var n=new Hata("#"+s.attr("id"));0==a.count&&n.el.addClass("hidden"),n.dom='\n                    <div class="icon">\n                        <i class="fa '+s.data("icon")+'" aria-hidden="true"></i>\n                    </div>\n                    <div class="title">'+s.data("title")+'</div>\n                    <div class="count">'+a.count+"</div>\n                ",n.data={},n.events=function(){n.el.bind("click",function(){n.el.hasClass("active")?($(s.data("res")).removeClass("active"),$(s.data("res")).html(""),n.el.removeClass("active")):(removeActive(),$.ajax({url:"/sysmsgs/my/get-all",type:"GET",dataType:"json",data:"group="+s.data("group"),success:function(a,t,e){$(s.data("res")).addClass("active"),n.el.addClass("active"),n.active=1;var d=new Hata(s.data("res"));d.dom='\n                                        <div class="sysmsgsitem {{type}}" data-id="{{id}}">\n                                            <div class="date">{{date}}</div>\n                                            <div class="content">{{content}}</div>\n                                            <div class="closebtn">\n                                                <i class="fa fa-times" aria-hidden="true"></i>\n                                            </div>\n                                        </div>\n                                    ',d.data=a.items,d.events=function(){d.el.find(".closebtn").each(function(a){var s=$(this);s.bind("click",function(){$.ajax({url:"/sysmsgs/my/check-read",type:"GET",dataType:"json",data:"id="+s.parent().data("id"),success:function(a,t,e){s.parent().remove()}})})})},d.render()}}))})},n.render(),setInterval(function(){$.ajax({url:"/sysmsgs/my/get-count",type:"GET",dataType:"json",data:"group="+s.data("group"),success:function(a,s,t){a.count>0?n.el.removeClass("hidden"):n.el.addClass("hidden"),n.el.find(".count").html(a.count)}})},2e3)}})});